# JMA Amedas elems パラメータ解析

## 概要

JMA（気象庁）のアメダスサイトでは、表示する観測要素の選択状態を `elems` URLパラメータで管理しています。このパラメータは16進数形式のビットフラグシステムを採用しており、各観測要素が特定のビット位置に対応しています。

## パラメータ形式

- **形式**: 16進数文字列
- **例**: `53414`, `53434`, `5361c`
- **制御方式**: ビットフラグ（各ビットが観測要素のON/OFFを制御）

## ビットマッピング

### 基本パターン分析

| elems値 | 2進数表現 | 説明 |
|---------|-----------|------|
| `0` | `0` | ベースライン（地点名のみ） |
| `5361c` | `1010011011000011100` | 標準基本観測要素セット |

### ビット位置マッピング

| ビット位置 | ビット値（16進） | 対応観測要素 |
|-----------|---------------|-------------|
| 0 | 0x1 | 自動観測による天気 |
| 1 | 0x2 | 水平視程 |
| 2 | 0x4 | 海面気圧 |
| 3 | 0x8 | 現地気圧 |
| 4 | 0x10 | 湿度 |
| 5 | 0x20 | 降雪量(前24時間) |
| 6 | 0x40 | 降雪量(前12時間) |
| 7 | 0x80 | 降雪量(前6時間) |
| 8 | 0x100 | 降雪量(前1時間) |
| 9 | 0x200 | 積雪深 |
| 10 | 0x400 | 日照時間(前1時間) |
| 11 | 0x800 | 日照時間(前10分間) |
| 12 | 0x1000 | 風速 |
| 13 | 0x2000 | 風向 |
| 14 | 0x4000 | 降水量(前24時間) |
| 15 | 0x8000 | 降水量(前3時間) |
| 16 | 0x10000 | 降水量(前1時間) |
| 17 | 0x20000 | 降水量(前10分間) |
| 18 | 0x40000 | 気温 |

## amedastable.json

| elemsコード | ビットマッピング | 自動観測天気 | 水平視程 | 海面気圧 | 現地気圧 | 湿度 | 降雪量 | 積雪深 | 日照時間 | 風速 | 風向 | 降水量 | 気温 | 観測地点名 | 地点コード |
|----------|----------|--------|------|------|------|------|------|------|--------|------|------|------|------|-------|-------|
| `01000000` | `3c000`    |  |  |  |  |  |  |  |  |  |  | ○ |  | 世田谷   | 44126 |
| `01000100` | `3c000`    |  |  |  |  |  |  |  |  |  |  | ○ |  | 小谷    | 48097 |
| `10001011` | `40c18`    |  |  |  | ○ | ○ |  |  | ○ |  |  |  | ○ | 富士山   | 50066 |
| `11110000` | `7f000`    |  |  |  |  |  |  |  |  | ○ | ○ | ○ | ○ | 羽田    | 44166 |
| `11110100` | `7f000`    |  |  |  |  |  |  |  |  | ○ | ○ | ○ | ○ | 声問    | 11061 |
| `11111011` | `7fc1f`    | ○ | ○ | ○ | ○ | ○ |  |  | ○ | ○ | ○ | ○ | ○ | 勝浦    | 45371 |
| `11111110` | `7fc10`    |  |  |  |  | ○ |  |  | ○ | ○ | ○ | ○ | ○ | つくば   | 40336 |
| `11111111` | `7fdfc`    |  |  | ○ | ○ | ○ | ○ |  | ○ | ○ | ○ | ○ | ○ | 東京    | 44132 |
| `11112000` | `7fc00`    |  |  |  |  |  |  |  | △ | ○ | ○ | ○ | ○ | 江戸川臨海 | 44136 |
| `11112010` | `7fc10`    |  |  |  |  | ○ |  |  | △ | ○ | ○ | ○ | ○ | 府中    | 44116 |
| `11112100` | `7fc00`    |  |  |  |  |  |  |  | △ | ○ | ○ | ○ | ○ | 白馬    | 48141 |
| `11112110` | `7fc10`    |  |  |  |  | ○ |  |  | △ | ○ | ○ | ○ | ○ | さいたま  | 43241 |

- △は、日照時間において推定を示す。
- ビットは、それぞれ気温, 降水量, 風向, 風速, 日照時間, 積雪深, 湿度, 気圧を示す。

- `https://www.jma.go.jp/bosai/amedas/const/amedastable.json`
上記 URL の `elems` セクションは、それぞれの観測地点においてどの観測要素が有効かを示します。

### 01000000: 降水量のみ有効 (3c000) (e.g. 世田谷, 44126)

降水量(前10分間)降水量(前1時間)降水量(前3時間)降水量(前24時間)

```json
{
    "type": "C",
    "elems": "01000000",
    "lat": [
        35,
        37.6
    ],
    "lon": [
        139,
        37.2
    ],
    "alt": 35,
    "kjName": "世田谷",
    "knName": "セタガヤ",
    "enName": "Setagaya"
}
```

### 01000100: 降水量のみ有効 (3c000) (e.g. 小谷, 48097)

降水量(前10分間)降水量(前1時間)降水量(前3時間)降水量(前24時間)

```json
{
    "type": "C",
    "elems": "01000100",
    "lat": [
        36,
        49.3
    ],
    "lon": [
        137,
        55.8
    ],
    "alt": 550,
    "kjName": "小谷",
    "knName": "オタリ",
    "enName": "Otari"
}
```

### 10001011: 気温, 日照時間, 湿度, 現地気圧 (40c18) (e.g. 富士山, 50066)

富士山のみ

気温日照時間(前10分間)日照時間(前1時間)湿度現地気圧

```json
{
    "type": "F",
    "elems": "10001011",
    "lat": [
        35,
        21.6
    ],
    "lon": [
        138,
        43.6
    ],
    "alt": 3775,
    "kjName": "富士山",
    "knName": "フジサン",
    "enName": "Mt. Fuji"
}
```

### 11110000: 気温, 降水量, 風量, 風速 (7f000) (e.g. 羽田, 44166)

空港ばっかり

気温降水量(前10分間)降水量(前1時間)降水量(前3時間)降水量(前24時間)風向風速

```json
{
    "type": "C",
    "elems": "11110000",
    "lat": [
        35,
        33.2
    ],
    "lon": [
        139,
        46.8
    ],
    "alt": 6,
    "kjName": "羽田",
    "knName": "ハネダ：東京国際空港",
    "enName": "Haneda"
}
```

### 11110100: 気温, 降水量, 風量, 風速 (7f000) (e.g. 声問, 11061)

空港ばっかり

気温降水量(前10分間)降水量(前1時間)降水量(前3時間)降水量(前24時間)風向風速

```json
{
    "type": "C",
    "elems": "11110100",
    "lat": [
        45,
        24.2
    ],
    "lon": [
        141,
        48.1
    ],
    "alt": 8,
    "kjName": "声問",
    "knName": "コエトイ：稚内空港",
    "enName": "Koetoi"
}
```

### 11111011: (7fc1f) (e.g. 勝浦, 45371)

気温 降水量(前10分間) 降水量(前1時間) 降水量(前3時間) 降水量(前24時間) 風向 風速 日照時間(前10分間) 日照時間(前1時間) 湿度 現地気圧 海面気圧 水平視程 自動観測による天気

```json
{
    "type": "B",
    "elems": "11111011",
    "lat": [
        35,
        9.0
    ],
    "lon": [
        140,
        18.7
    ],
    "alt": 12,
    "kjName": "勝浦",
    "knName": "カツウラ",
    "enName": "Katsuura"
}
```

### 11111110: (7fc10) (e.g. つくば、40336)

気温降水量(前10分間)降水量(前1時間)降水量(前3時間)降水量(前24時間)風向風速日照時間(前10分間)日照時間(前1時間)湿度

つくばのみ

```json
{
    "type": "C",
    "elems": "11111110",
    "lat": [
        36,
        3.4
    ],
    "lon": [
        140,
        7.5
    ],
    "alt": 25,
    "kjName": "つくば",
    "knName": "ツクバ",
    "enName": "Tsukuba"
}
```

### 11111111: (7fdfc) (e.g. 東京, 44132)


気温降水量(前10分間)降水量(前1時間)降水量(前3時間)降水量(前24時間)風向風速日照時間(前10分間)日照時間(前1時間)降雪量(前1時間)降雪量(前6時間)降雪量(前12時間)降雪量(前24時間)湿度現地気圧海面気圧

```json
{
    "type": "A",
    "elems": "11111111",
    "lat": [
        35,
        41.5
    ],
    "lon": [
        139,
        45
    ],
    "alt": 25,
    "kjName": "東京",
    "knName": "トウキョウ",
    "enName": "Tokyo"
}
```

### 11112000: (7fc00) (e.g. 江戸川臨海, 44136)

気温降水量(前10分間)降水量(前1時間)降水量(前3時間)降水量(前24時間)風向風速日照時間(推計)(前10分間)日照時間(推計)(前1時間)

```json
{
    "type": "C",
    "elems": "11112000",
    "lat": [
        35,
        38.3
    ],
    "lon": [
        139,
        51.8
    ],
    "alt": 5,
    "kjName": "江戸川臨海",
    "knName": "エドガワリンカイ",
    "enName": "Edogawa Seaside"
}
```

### 11112010: (7fc10) (e.g. 府中, 44116)

気温降水量(前10分間)降水量(前1時間)降水量(前3時間)降水量(前24時間)風向風速日照時間(推計)(前10分間)日照時間(推計)(前1時間)湿度

```json
{
    "type": "C",
    "elems": "11112010",
    "lat": [
        35,
        41
    ],
    "lon": [
        139,
        29
    ],
    "alt": 59,
    "kjName": "府中",
    "knName": "フチュウ",
    "enName": "Fuchu"
}
```

### 11112100: (7fc00) (e.g. 白馬, 48141)

気温降水量(前10分間)降水量(前1時間)降水量(前3時間)降水量(前24時間)風向風速日照時間(推計)(前10分間)日照時間(推計)(前1時間)

```json
{
    "type": "C",
    "elems": "11112100",
    "lat": [
        36,
        41.9
    ],
    "lon": [
        137,
        51.7
    ],
    "alt": 703,
    "kjName": "白馬",
    "knName": "ハクバ",
    "enName": "Hakuba"
}
```

### 11112110: (7fc10) (e.g. さいたま, 43241)

気温降水量(前10分間)降水量(前1時間)降水量(前3時間)降水量(前24時間)風向風速日照時間(推計)(前10分間)日照時間(推計)(前1時間)湿度

```json
{
    "type": "C",
    "elems": "11112110",
    "lat": [
        35,
        52.5
    ],
    "lon": [
        139,
        35.2
    ],
    "alt": 8,
    "kjName": "さいたま",
    "knName": "サイタマ",
    "enName": "Saitama"
}
```

```json
{
    "type": "C",
    "elems": "11112110",
    "lat": [
        35,
        52.5
    ],
    "lon": [
        139,
        35.2
    ],
    "alt": 8,
    "kjName": "さいたま",
    "knName": "サイタマ",
    "enName": "Saitama"
}
```
